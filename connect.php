<?php
// Replace these variables with your actual database credentials
$dsn = 'mysql:host=localhost;dbname=e-commerce-halfa';
$username = 'root';
$password = '';
// Ø®ÙŠØ§Ø±Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© Ù„Ù„Ø§ØªØµØ§Ù„ØŒ
// Ù‡Ù†Ø§ Ø¨Ù†Ø­Ø¯Ø¯ ØªØ±Ù…ÙŠØ² 
// UTF-8
//  Ø¹Ø´Ø§Ù† Ù†Ø¯Ø¹Ù… Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­
$options = array(PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES UTF8");
// -------------------------
// ðŸ”„ Pagination (Ø§Ù„ØªÙ‚Ø³ÙŠÙ… Ø§Ù„ØµÙØ­ÙŠ):
// Ø¯Ø§ Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù†Ø§ØµØ± (Ù…Ø«Ù„Ø§Ù‹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø£Ùˆ Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª) Ø§Ù„Ø¹Ø§ÙŠØ² Ø£Ø¹Ø±Ø¶Ù‡Ø§ ÙÙŠ ÙƒÙ„ ØµÙØ­Ø©.
// Ù…Ø«Ù„Ø§Ù‹ Ù„Ùˆ Ø¹Ù†Ø¯ÙŠ 100 Ù…Ù†ØªØ¬ØŒ ÙˆØ£Ø¹Ø±Ø¶ 9 Ø¨Ø³ ÙÙŠ ÙƒÙ„ ØµÙØ­Ø©ØŒ Ø­Ø§Ø­ØªØ§Ø¬ Ø£ÙƒØªØ± Ù…Ù† ØµÙØ­Ø©.
// Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰: 1 - 9
// Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©: 10 - 18
// ÙˆÙ‡ÙƒØ°Ø§...
$countrowinpage = 9;

try {
    $con = new PDO($dsn,     $username, $password,$options);

    
    // Ø¨Ù†Ø­Ø¯Ø¯ Ø¥Ù†Ùˆ Ù„Ùˆ Ø­ØµÙ„ Ø£ÙŠ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø£Ùˆ ØªÙ†ÙÙŠØ° Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§ØªØŒ ÙŠØªÙ… Ø¥Ø·Ù„Ø§Ù‚ Ø§Ø³ØªØ«Ù†Ø§Ø¡ 
    // (Exception)
    $con->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    //Ø¹Ø´Ø§Ù† Ù…Ø§ Ùƒ Ù…Ø±Ø© Ù†Ø­ØªØ¬Ø§ Ø§Ù†Ù†Ø§ Ù†Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ù„Ù Ø¨ØªØ§Ø¹ Ø§Ù„Ø¯ÙˆØ§Ù„ .ØªØ§Ù†ÙŠ Ù†Ø¬ÙŠ Ù†Ø¹Ù…Ù„ Ù„ÙŠÙ‡Ùˆ :
    //include
    //Ø¨Ù†Ø®ØªØµØ± Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹ Ø¨Ø§Ù†Ù†Ø§ Ù†Ø¹Ù…Ù„ Ù„ÙŠÙ‡Ùˆ 
    //include
    //Ù‡Ù†Ø§ Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© ÙˆØ¨Ø³ .
    include "functions.php";

       // Ø§Ù„Ø³Ù…Ø§Ø­ Ù„Ø£ÙŠ Ù…ÙˆÙ‚Ø¹ Ø®Ø§Ø±Ø¬ÙŠ Ø¥Ù†Ù‡ ÙŠØªØµÙ„ Ø¨Ù‡Ø°Ø§ Ø§Ù„Ù…Ù„Ù
    header("Access-Control-Allow-Origin: *");

    // Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø¥Ø±Ø³Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø¹ÙŠÙ‘Ù†Ø© ÙÙŠ Ø§Ù„Ù‡ÙŠØ¯Ø± Ø²ÙŠ Content-Type (JSON) Ø£Ùˆ Authorization
    header("Access-Control-Allow-Headers: Content-Type, Access-Control-Allow-Headers, Authorization, X-Requested-With");

    // Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø£Ù†ÙˆØ§Ø¹ Ù…Ø­Ø¯Ø¯Ø© Ù…Ù† Ø§Ù„Ø·Ù„Ø¨Ø§Øª:
    //  POST (Ø¥Ø±Ø³Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª)ØŒ GET (Ù‚Ø±Ø§Ø¡Ø© Ø¨ÙŠØ§Ù†Ø§Øª)ØŒ OPTIONS (Ø·Ù„Ø¨ Ø§Ø³ØªÙƒØ´Ø§ÙÙŠ)
    header("Access-Control-Allow-Methods: POST, OPTIONS , GET");
// âœ… Ù„Ùˆ Ø§Ù„Ù…ØªØºÙŠØ± 
// $notAuth
//  Ù…Ø§ Ù…ÙˆØ¬ÙˆØ¯ØŒ Ù…Ø¹Ù†Ø§Ù‡Ø§ Ø§Ù„ØµÙØ­Ø© Ø¯ÙŠ Ù…Ø­ØªØ§Ø¬Ø© Ø­Ù…Ø§ÙŠØ© 
// Ø¨Ù†Ø¬Ù‡Ø² Ù„Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø¯Ø§Ù„Ø© 
// checkAuthenticate()
//  Ø¹Ø´Ø§Ù† Ù†ØªØ£ÙƒØ¯ Ø¥Ù†Ùˆ Ø§Ù„Ø²ÙˆÙ„ Ù…Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„ 
// Ù„Ùˆ Ø¹Ø§ÙŠØ² ØªÙ„ØºÙŠ Ø§Ù„Ø­Ù…Ø§ÙŠØ© ÙÙŠ ØµÙØ­Ø© Ù…Ø¹ÙŠÙ†Ø©ØŒ Ø¨Ø³ Ø£ÙƒØªØ¨ 
// $notAuth = true;
//  ÙÙŠ Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„ØµÙØ­Ø©
// (Ø¨Ù†Ø®Ù„ÙŠÙ‡Ø§ Ù…Ø¹Ù„Ù‘Ù‚Ø© ÙƒØªØ¹Ù„ÙŠÙ‚ Ù„Ø­Ø¯ÙŠ Ù…Ø§ Ù†Ø­ØªØ§Ø¬Ù‡Ø§ ÙØ¹Ù„ÙŠÙ‹Ø§ ÙÙŠ Ù…Ù„ÙØ§Øª Ø§Ù„Ø­Ù…Ø§ÙŠØ©)
if (!isset($notAuth)) {
    //Ù†Ø­Ù†Ø§ Ù…ÙˆÙ‚ÙÙŠÙ† Ø§Ù„Ø­Ù…Ø§ÙŠØ© Ù„ÙŠØ© ØŸ
    //Ø§Ù„Ø­Ù…Ø§ÙŠØ© Ø¯ÙŠ Ø§Ø­Ù†Ø§ Ø­Ù†Ø´ØºÙ„Ù‡Ø§ ÙÙ‚Ø· Ù‚Ø¨Ù„Ø§ Ù…Ø§ Ù†Ø±ÙØ¹ Ø§Ù„Ø´ØºÙ„ Ø¹Ù„ÙŠ Ø§Ù„Ø³ÙŠØ±ÙØ± 
    //Ù†Ø­Ù†Ø§ Ø§Ø³ÙŠ Ø¹Ø§ÙˆØ²Ù†Ùˆ Ù…Ø´ Ù…Ø­Ù…ÙŠ Ù„ÙŠØ© ØŸØ¹Ø´Ø§Ù† Ù†Ù‚Ø¯Ø± Ù†ØµÙ„ Ù„ÙŠÙ‡Ùˆ Ø¨Ø³Ù‡ÙˆÙ„Ø©  Ø§ÙƒØ¨Ø± Ù…Ù† Ø®Ù„Ø§Ù„
    //thunderclinent or postman
    // checkAuthenticate(); // Ø¯Ø§Ù„Ø© Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (login/auth)
} // checkAuthenticate();
    
} catch (PDOException $e) {
    // Error occurred, display the error message
    //-> == .
    echo "Connection failed: " . $e->getMessage();
}
?>
